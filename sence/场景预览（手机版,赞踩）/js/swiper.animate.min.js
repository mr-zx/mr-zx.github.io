//获取所有动画元素的style，放入自定义属性里作为缓存，并隐藏该元素
function swiperAnimateCache() {
    for (allBoxes = window.document.documentElement.querySelectorAll(".ani"), i = 0; i < allBoxes.length; i++) allBoxes[i].attributes["style"] ? allBoxes[i].setAttribute("swiper-animate-style-cache", allBoxes[i].attributes["style"].value) : allBoxes[i].setAttribute("swiper-animate-style-cache", " ")//, allBoxes[i].style.visibility = "hidden"
}
//对当前页里的所有动画元素进行的操作：显示出来，然后读取每一个自定义的属性值，并拼接好赋值给该元素的class和style
function swiperAnimate(a) {
    clearSwiperAnimate();
    var b = a.slides[a.activeIndex].querySelectorAll(".ani");
    for (i = 0; i < b.length; i++) b[i].style.display = "block", effect = b[i].attributes["swiper-animate-effect"] ? b[i].attributes["swiper-animate-effect"].value : "", b[i].className = b[i].className.replace(/(^\s*)|(\s*$)/g, "") + " " + effect + " " + "animated", style = b[i].attributes["style"].value, duration = b[i].attributes["swiper-animate-duration"] ? b[i].attributes["swiper-animate-duration"].value : "", duration && (style = style + "animation-duration:" + duration + ";-webkit-animation-duration:" + duration + ";"), delay = b[i].attributes["swiper-animate-delay"] ? b[i].attributes["swiper-animate-delay"].value : "", delay && (style = style + "animation-delay:" + delay + ";-webkit-animation-delay:" + delay + ";"), count = b[i].attributes["swiper-animate-count"] ? b[i].attributes["swiper-animate-count"].value : "1", count && (style = style + "animation-iteration-count:" + count + ";-webkit-animation-iteration-count:" + count + ";"), b[i].setAttribute("style", style), b[i].style.display = "block"//, b[i].style.visibility = "visible"    
}

//对所有动画元素：style设为缓存里的样式，隐藏，去掉标识已播放过的class“animated”，去掉动画效果的class
function clearSwiperAnimate() {    
    for (allBoxes = window.document.documentElement.querySelectorAll(".ani"), i = 0; i < allBoxes.length; i++) allBoxes[i].attributes["swiper-animate-style-cache"] && allBoxes[i].setAttribute("style", allBoxes[i].attributes["swiper-animate-style-cache"].value), /*allBoxes[i].style.visibility = "hidden",*/ allBoxes[i].className = allBoxes[i].className.replace("animated", ""), allBoxes[i].attributes["swiper-animate-effect"] && (effect = allBoxes[i].attributes["swiper-animate-effect"].value, allBoxes[i].className = allBoxes[i].className.replace(effect, "")), allBoxes[i].style.display = "none"
}